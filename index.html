<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Botonera Dinámica</title>
  <style>
    body { font-family: Arial, sans-serif; background: #121212; color: #fff; }
    .grupo { margin-bottom: 12px; padding: 10px; border-radius: 6px; background: #222; }
    button { width: 100%; margin: 5px 0; padding: 8px; border-radius: 4px; border: none; background: #C93C20; color: #fff; font-weight: bold; cursor: pointer; }
    button:hover { background: #a82a15; }
    .toast { position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%); background: #333; color: #fff; padding: 12px 18px; border-radius: 8px; font-size: 14px; opacity: 0; pointer-events: none; transition: opacity 0.5s; z-index: 9999; }
    .toast.show { opacity: 1; }
  </style>
</head>
<body>
  <!-- INICIO BILLETERAS -->
  <div class="grupo">
    <h3>Billeteras</h3>
    <div id="billeteras"></div>
  </div>
  <!-- INICIO BANCO -->
  <div class="grupo">
    <h3>Banco</h3>
    <div id="banco"></div>
  </div>
  <!-- INICIO SALUDOS -->
  <div class="grupo">
    <h3>Saludos</h3>
    <button onclick="copiarSaludo()">Copiar saludo aleatorio</button>
  </div>
  <div id="toast" class="toast"></div>

  <!-- INICIO CONFIGURACIÓN DINÁMICA -->
  <script>
    let billeteras = [];
    let saludos = [];
    let banco = [];
    let toast = { copiado: "✅ Copiado: ", error: "❌ Error al copiar" };

    // Cambia 'config.json' por el nombre de tu archivo de datos
    fetch('config.json')
      .then(response => response.json())
      .then(config => {
        // INICIO BILLETERAS
        billeteras = config.billeteras || [];
        const billeterasDiv = document.getElementById('billeteras');
        billeteras.forEach(b => {
          const btn = document.createElement('button');
          btn.textContent = b.nombre;
          btn.onclick = () => copyText(b.alias);
          billeterasDiv.appendChild(btn);
        });

        // INICIO BANCO
        banco = config.banco || [];
        const bancoDiv = document.getElementById('banco');
        banco.forEach(b => {
          const btn = document.createElement('button');
          btn.textContent = b.nombre;
          btn.onclick = () => copyText(b.alias);
          bancoDiv.appendChild(btn);
        });

        // INICIO SALUDOS
        saludos = config.saludos || [];

        // INICIO TOAST
        toast = config.toast || toast;
      });

    function copiarSaludo() {
      if (!saludos.length) return showToast(toast.error);
      const usuario = prompt("Escribí el usuario:");
      if (!usuario) return;
      const randomIndex = Math.floor(Math.random() * saludos.length);
      const mensaje = saludos[randomIndex]
        .replaceAll("{usuario}", usuario)
        .replaceAll("{usuarioENC}", encodeURIComponent(usuario));
      copyText(mensaje);
    }

    function copyText(txt) {
      if (navigator.clipboard && navigator.clipboard.writeText) {
        navigator.clipboard.writeText(txt).then(() => {
          showToast(toast.copiado + txt);
        }).catch(() => showToast(toast.error));
      } else {
        showToast(toast.error);
      }
    }

    function showToast(message) {
      const toastDiv = document.getElementById("toast");
      toastDiv.textContent = message;
      toastDiv.classList.add("show");
      setTimeout(() => toastDiv.classList.remove("show"), 2000);
    }
  </script>
  <!-- FIN CONFIGURACIÓN DINÁMICA -->
</body>
</html>
